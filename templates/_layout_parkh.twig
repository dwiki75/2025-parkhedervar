{# Layout template #}
{% include './includes/_head.twig' %}

<body class="min-h-dvh antialiased">
  {# Skip link a képernyőolvasók és billentyűzet felhasználók kedvéért #}
  <a href="#main"
     class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:z-[100] focus:px-3 focus:py-2 focus:rounded-md focus:bg-white focus:text-black focus:shadow-md">
    {{ 'Ugrás a fő tartalomra'|t }}
  </a>

  {# ---- Globális képtranform setek (változatlanul hagyva) ---- #}
  {% set thumb1024crop = { mode: 'crop', width: 1024, height: 640, quality: 100, position: 'center-center' } %}
  {% set thumb640Hcrop = { mode: 'crop', width: 640, height: 1024, quality: 100, position: 'center-center' } %}
  {% set thumb1024fit = { mode: 'fit', width: 1024, height: 640, quality: 100, position: 'center-center' } %}
  {% set thumb640Hfit = { mode: 'fit', width: 640, height: 1024, quality: 100, position: 'center-center' } %}
  {% set thumb640crop = { mode: 'fit', width: 640, quality: 100 } %}
  {% set thumb1024x940crop = { mode: 'crop', width: 1024, height: 940, quality: 100, position: 'center-center' } %}
  {% set thumb640x480V = { mode: 'fit', width: 640, height: 480, quality: 95, position: 'center-center' } %}
  {% set thumb1980x1080 = { mode: 'fit', width: 1920, height: 1080, quality: 95, position: 'center-center' } %}
  {% set thumb608x1080 = { mode: 'crop', width: 608, height: 1080, quality: 95, position: 'center-center' } %}
  {% set thumb1024 = { mode: 'fit', width: 1024, height: 640, quality: 100, position: 'center-center' } %}
  {% set thumb1024crop = { mode: 'crop', width: 1024, height: 640, quality: 100, position: 'center-center' } %}
  {% set thumb800 = { mode: 'crop', width: 800, height: 600, quality: 100, position: 'center-center' } %}
  {% set thumb600 = { mode: 'crop', width: 600, height: 450, quality: 100, position: 'center-center' } %}
  {% set thumb400 = { mode: 'crop', width: 400, height: 210, quality: 100, position: 'center-center' } %}
  {% set banner970 = { mode: 'fit', width: 970, height: 250, quality: 100, position: 'center-center' } %}
  {% set banner1920 = { mode: 'crop', width: 1920, height: 688, quality: 100, position: 'center-center' } %}
  {% set banner1920b = { mode: 'crop', width: 1920, height: 688, quality: 100, position: 'center-center' } %}
  {% set ban286 = { mode: 'crop', width: 286, height: 376, quality: 100, position: 'center-center' } %}
  {% set ban980 = { mode: 'crop', width: 980, height: 236, quality: 100, position: 'center-center' } %}

  {# ---------- HEADER / NAV ---------- #}
  <header role="banner">
    {% block menu %}
      {% set currentEntry = entry ?? null %}
      {% set currentLang = currentSite.language %}
      {% set sites = craft.app.sites.getAllSites() %}

      {# Mobil sticky nav #}
      <div class="block md:hidden sticky top-0 z-50 bg-white">
        <nav aria-label="{{ 'Fő navigáció'|t }}">
          {% include './includes/_menu' with { id: 'mobile-header' } %}
        </nav>
      </div>

      {# Felső sáv (ikonok + nyelvváltó) #}
      <div class="w-full bg-secondary hidden md:block rounded-4xl">
        <div class="max-w-8xl m-auto grid grid-cols-2 sm:flex sm:items-center justify-between p-3 gap-4 bg-secondary text-white">
          <div class="flex flex-col sm:flex-row gap-2 sm:gap-4 sm:items-center">
            {% include './includes/_iconsData.twig' with { id: 'mobile-header' } %}
          </div>
          <div class="flex justify-end sm:justify-start">
            <nav aria-label="{{ 'Nyelvváltó'|t }}">
              {% include './includes/_language' %}
            </nav>
          </div>
        </div>
      </div>

      {# Desktop sticky nav #}
      <div class="hidden md:block sticky top-0 z-50 bg-lightbrown p-5">
        <nav aria-label="{{ 'Fő navigáció'|t }}">
          {% include './includes/_menu' with { id: 'site-header' } %}
        </nav>
      </div>
    {% endblock %}
  </header>

  {# ---------- MAIN ---------- #}
  {% set Local = currentSite.language %}
  <main id="main" tabindex="-1">
    {% block main %}{% endblock %}
  </main>

  {# ---------- FOOTER ---------- #}
  <footer role="contentinfo" class="mt-12">
    {% block footer %}
      {% set footer = craft.app.globals.getSetByHandle('footer') %}

      <div class="w-full mx-auto bg-primary text-white">
        <div class="max-w-8xl mx-auto px-6 py-12">
          <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            {# logo #}
            <div class="lg:col-span-2">
              {% set footerImg = footer.onePict.one() %}
              {% if footerImg %}
                <img
                  src="{{ footerImg.url }}"
                  alt="{{ siteName }}"
                  class="h-14 w-auto"
                  loading="lazy" decoding="async">
              {% endif %}
            </div>

            {# Szövegbox 1 #}
            <div class="[&_h3]:text-xl [&_h3]:lg:text-2xl [&_h3]:mb-4 [&_h3]:text-white [&_a]:underline">
              {{ footer.textBox|raw }}
            </div>

            {# Szövegbox 2 #}
            <div class="[&_h3]:text-xl [&_h3]:lg:text-2xl [&_h3]:mb-4 [&_h3]:text-white [&_a]:underline">
              {{ footer.textBox2|raw }}
            </div>

            {# Szövegbox 3 - teljes szélesség #}
            <div class="col-span-1 lg:col-span-4 mt-4 text-sm [&_h3]:text-base [&_h3]:lg:text-lg [&_h3]:mb-4 [&_h3]:text-white [&_a]:underline">
              {{ footer.textBox3|raw }}
            </div>
          </div>
        </div>
      </div>
    {% endblock %}
  </footer>

  {% include './includes/_popup' %}
</body>
</html>
