{% import '_macros/icons.twig' as icons %}
{% set headerEntry = craft.app.globals.getSetByHandle('header') %}


{% if headerEntry and headerEntry.datas|length %}
  <ul class="flex flex-wrap items-start gap-2 sm:gap-x-4 sm:gap-y-2 w-full min-w-0">
    {% for block in headerEntry.datas %}
      {% set iconName = block.simpleIcon|trim %}
      {% set label = block.simpleText|trim %}
      {% set url = block.simpleLink|trim %}

      {% set iconSet = null %}
      {% if iconName %}
        {% set heroiconsPath = 'includes/icons/heroicons/' ~ iconName ~ '.svg' %}
        {% set brandsPath = 'includes/icons/brands/' ~ iconName ~ '.svg' %}
        {% if craft.app.view.doesTemplateExist(heroiconsPath) %}
          {% set iconSet = 'heroicons' %}
        {% elseif craft.app.view.doesTemplateExist(brandsPath) %}
          {% set iconSet = 'brands' %}
        {% endif %}
      {% endif %}

      {% set iconHtml = '' %}
      {% if iconSet %}
        {% set iconHtml = icons.icon(iconName, iconSet, 'w-6 h-6 text-white') %}
      {% endif %}

      {# LI: egy elem (ikon+felirat) együtt marad, de több sorba törhet #}
      <li class="flex items-center gap-2 max-w-full min-w-0">
        {% if url %}
          <a href="{{ url }}" target="_blank" rel="noopener noreferrer"
             class="inline-flex items-center gap-2 min-w-0 max-w-full hover:underline text-white">
            {{ iconHtml|raw }}
            {% if label %}
              <span class="min-w-0 max-w-full break-words [hyphens:auto]">{{ label }}</span>
            {% endif %}
          </a>
        {% else %}
          <div class="inline-flex items-center gap-2 min-w-0 max-w-full">
            {% if iconHtml %}
              {{ iconHtml|raw }}
            {% endif %}
            {% if label %}
              <span class="min-w-0 max-w-full break-words [hyphens:auto]">{{ label }}</span>
            {% endif %}
          </div>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endif %}
